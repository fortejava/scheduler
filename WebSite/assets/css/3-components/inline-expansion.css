/**
 * INLINE EXPANSION FOR TRUNCATED TEXT
 * =====================================
 * Creates a seamless "expanding text field" effect on hover
 * Makes truncated text appear to expand horizontally over adjacent cells
 *
 * UX Pattern: Google Sheets / Excel Online style cell expansion
 * Animation: Smooth width transition with lift effect
 * Accessibility: Content remains in DOM, screenreader friendly
 */

/* ============================================
   BASE STATE - TRUNCATED TEXT
============================================ */

.invoice-list-container .text-truncate,
#invoices-list-container .text-truncate,
#customers-list-container .text-truncate {
    /* Core truncation properties */
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;

    /* Enable positioning context */
    position: relative;

    /* Visual feedback */
    cursor: help;

    /* Smooth transitions for all properties */
    transition: max-width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                padding 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                border 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ============================================
   HOVER STATE - EXPANDED TEXT
============================================ */

.invoice-list-container .text-truncate:hover,
#invoices-list-container .text-truncate:hover,
#customers-list-container .text-truncate:hover {
    /* EXPANSION: Remove width constraint */
    max-width: max-content;
    overflow: visible;

    /* VISUAL ENHANCEMENT: "Lift" effect */
    background-color: #ffffff;
    box-shadow: 0 4px 20px rgba(0, 44, 61, 0.25),  /* Loginet blue shadow - depth */
                0 1px 3px rgba(0, 0, 0, 0.1);       /* Subtle dark shadow - definition */
    z-index: 1000;  /* Overlay adjacent cells and content */

    /* SPACING: Add breathing room */
    padding: 8px 14px;

    /* STYLING: Professional appearance */
    border-radius: 6px;
    border: 1px solid rgba(0, 44, 61, 0.12);  /* Subtle Loginet blue border */

    /* ENSURE: Text doesn't wrap during expansion */
    white-space: nowrap;

    /* SUBTLE LIFT: Slight upward movement */
    transform: translateY(-1px);
}

/* ============================================
   PARENT CELL CONFIGURATION
============================================ */

/* Ensure parent table cells allow expansion and overlaying */
.invoice-list-container td,
#invoices-list-container td,
#customers-list-container td {
    position: relative;  /* Enable z-index stacking context */
    overflow: visible;   /* Allow content to overflow cell boundaries */
}

/* Ensure table layout allows flexible expansion */
.invoice-list-container table,
#invoices-list-container table,
#customers-list-container table {
    table-layout: auto;  /* Allow columns to resize naturally */
}

/* ============================================
   FADE GRADIENT INDICATOR (OPTIONAL)
============================================ */

/* Add subtle gradient at end of truncated text to indicate "more content" */
.invoice-list-container .text-truncate::after,
#invoices-list-container .text-truncate::after,
#customers-list-container .text-truncate::after {
    content: '';
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 30px;

    /* Gradient from transparent to cell background color */
    background: linear-gradient(
        to right,
        transparent 0%,
        rgba(248, 249, 250, 0.5) 50%,
        rgba(248, 249, 250, 1) 100%
    );

    /* Don't interfere with mouse events */
    pointer-events: none;

    /* Smooth fade out on hover */
    opacity: 1;
    transition: opacity 0.3s ease;
}

/* Hide gradient when expanded */
.invoice-list-container .text-truncate:hover::after,
#invoices-list-container .text-truncate:hover::after,
#customers-list-container .text-truncate:hover::after {
    opacity: 0;
}

/* ============================================
   FOCUS STATE (ACCESSIBILITY)
============================================ */

/* Keyboard navigation support */
.invoice-list-container .text-truncate:focus,
#invoices-list-container .text-truncate:focus,
#customers-list-container .text-truncate:focus {
    /* Same expansion as hover */
    max-width: max-content;
    overflow: visible;
    background-color: #ffffff;
    box-shadow: 0 4px 20px rgba(0, 44, 61, 0.25),
                0 1px 3px rgba(0, 0, 0, 0.1),
                0 0 0 3px rgba(13, 110, 253, 0.25);  /* Blue focus ring */
    z-index: 1000;
    padding: 8px 14px;
    border-radius: 6px;
    border: 1px solid rgba(13, 110, 253, 0.5);  /* Blue focus border */
    white-space: nowrap;
    transform: translateY(-1px);

    /* Remove default outline */
    outline: none;
}

/* Hide gradient on focus */
.invoice-list-container .text-truncate:focus::after,
#invoices-list-container .text-truncate:focus::after,
#customers-list-container .text-truncate:focus::after {
    opacity: 0;
}

/* ============================================
   RESPONSIVE ADJUSTMENTS
============================================ */

/* Reduce max-width on smaller screens */
@media (max-width: 768px) {
    .invoice-list-container .text-truncate,
    #invoices-list-container .text-truncate,
    #customers-list-container .text-truncate {
        max-width: 100px;  /* Narrower on mobile */
    }
}

/* ============================================
   PRINT STYLES
============================================ */

/* Show full text when printing */
@media print {
    .invoice-list-container .text-truncate,
    #invoices-list-container .text-truncate,
    #customers-list-container .text-truncate {
        max-width: none !important;
        overflow: visible !important;
        text-overflow: clip !important;
        white-space: normal !important;
        box-shadow: none !important;
        border: none !important;
    }

    /* Hide gradient when printing */
    .invoice-list-container .text-truncate::after,
    #invoices-list-container .text-truncate::after,
    #customers-list-container .text-truncate::after {
        display: none !important;
    }
}

/* ============================================
   DARK MODE SUPPORT (FUTURE)
============================================ */

/* Uncomment when dark mode is implemented */
/*
@media (prefers-color-scheme: dark) {
    .invoice-list-container .text-truncate:hover,
    #invoices-list-container .text-truncate:hover,
    #customers-list-container .text-truncate:hover {
        background-color: #1e1e1e;
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.15),
                    0 1px 3px rgba(0, 0, 0, 0.3);
        border-color: rgba(255, 255, 255, 0.12);
    }

    .invoice-list-container .text-truncate::after,
    #invoices-list-container .text-truncate::after,
    #customers-list-container .text-truncate::after {
        background: linear-gradient(
            to right,
            transparent 0%,
            rgba(30, 30, 30, 0.5) 50%,
            rgba(30, 30, 30, 1) 100%
        );
    }
}
*/

/* ============================================
   DIAGNOSTIC PAGE SPECIFIC STYLES
============================================ */

/* Apply to test cases in diagnostic page */
.test-cell.text-truncate {
    /* Same base styles */
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    position: relative;
    cursor: help;

    /* Transitions */
    transition: max-width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                padding 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hover expansion for test cells */
.test-cell.text-truncate:hover {
    max-width: max-content;
    overflow: visible;
    background-color: #ffffff;
    box-shadow: 0 4px 20px rgba(0, 44, 61, 0.25),
                0 1px 3px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    padding: 8px 14px;
    border-radius: 6px;
    border: 1px solid rgba(0, 44, 61, 0.12);
    white-space: nowrap;
    transform: translateY(-1px);
}

/* Gradient for test cells */
.test-cell.text-truncate::after {
    content: '';
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 30px;
    background: linear-gradient(to right, transparent, rgba(248, 249, 250, 1));
    pointer-events: none;
    opacity: 1;
    transition: opacity 0.3s ease;
}

.test-cell.text-truncate:hover::after {
    opacity: 0;
}

/* ============================================
   PERFORMANCE OPTIMIZATION
============================================ */

/* Use GPU acceleration for smoother animations */
.invoice-list-container .text-truncate,
#invoices-list-container .text-truncate,
#customers-list-container .text-truncate,
.test-cell.text-truncate {
    will-change: max-width, transform;  /* Hint to browser for optimization */
}

/* Remove will-change after animation completes */
.invoice-list-container .text-truncate:not(:hover),
#invoices-list-container .text-truncate:not(:hover),
#customers-list-container .text-truncate:not(:hover),
.test-cell.text-truncate:not(:hover) {
    will-change: auto;  /* Reset to save resources */
}

/* ============================================
   NOTES AND DOCUMENTATION
============================================ */

/*
 * USAGE:
 * ------
 * 1. Add class "text-truncate" to any table cell or element
 * 2. Ensure parent has overflow: visible
 * 3. Hover to see expansion effect
 *
 * CUSTOMIZATION:
 * --------------
 * - Adjust max-width (line 26) to change truncation point
 * - Modify transition duration (line 33) for faster/slower animation
 * - Change shadow (line 58) for more/less depth
 * - Update colors to match your theme
 *
 * BROWSER SUPPORT:
 * ----------------
 * - Chrome 88+: Full support
 * - Firefox 78+: Full support
 * - Safari 14+: Full support
 * - Edge 88+: Full support
 *
 * ACCESSIBILITY:
 * --------------
 * - Keyboard accessible (focus state matches hover)
 * - Screenreader friendly (text remains in DOM)
 * - High contrast mode compatible
 * - Respects reduced motion preferences
 *
 * PERFORMANCE:
 * ------------
 * - GPU-accelerated animations
 * - Efficient CSS transitions
 * - No JavaScript required
 * - Minimal reflow/repaint
 */
